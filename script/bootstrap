#!/bin/sh

exit_unless_xcode_exists() {
  if [ ! -d /Applications/Xcode.app ]; then
    echo "ERROR: Atom requires Xcode"
    echo "You must to download Xcode from the App Store (http://itunes.apple.com/us/app/xcode/id497799835)"
    exit 1
  fi
}

exit_unless_npm_exists() {
  if ! hash npm 2> /dev/null; then
    echo "ERROR: Atom requires npm"
    exit 1
  fi
}

exit_unless_brew_exists() {
  if ! hash brew 2> /dev/null; then
    echo "ERROR: Atom requires brew"
    exit 1
  fi
}

exit_unless_xcode_exists
exit_unless_npm_exists
exit_unless_brew_exists

npm install
brew install tools/gyp-formula.rb
