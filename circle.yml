machine:
  xcode:
    version: 7.3

general:
  artifacts:
    - out/pros-editor-mac.zip

dependencies:
  pre:
    - curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.31.3/install.sh | bash
    - nvm install 6.9.4
    - nvm use 6.9.4
    - npm install -g npm@5.3.0

  override:
    - script/build --code-sign --compress-artifacts

  cache_directories:
    - electron
    - apm/node_modules
    - script/node_modules
    - node_modules
    - ~/.atom/compile-cache
    - ~/.atom/snapshot-cache

test:
  override:
    - "true"

experimental:
  notify:
    branches:
      only:
        - master
